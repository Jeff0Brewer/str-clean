<html>
    <head>
        <title>str clean</title>
    </head>
    <body>
        <textarea id="in" placeholder="Input string"></textarea>
        <textarea id="fn" placeholder="Filter function"></textarea>
        <textarea readonly id="out" placeholder="Output string"></textarea>
    </body>
    <script>
        const inElem = document.getElementById('in');
        const fnElem = document.getElementById('fn');
        const outElem = document.getElementById('out');

        const tryFilter = () => {
            try{
                const fn = new Function('str', `let out = str;${fnElem.value};return out;`);
                return fn(inElem.value);
            } 
            catch(err){
                return err.message;
            }
        }

        const update = () => {
            outElem.value = tryFilter();
        }
        inElem.oninput = update;
        fnElem.oninput = update;
    </script>
    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            display: grid;
            grid-template-areas: "in out" "fn out";
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }

        textarea{
            background-color: #222;
            border: 0 solid #000;
            padding: 20px;
            overflow-y: scroll;
            color: #fff;
            scrollbar-width: none;
            resize: none;
        }

        textarea:focus{
            outline: none;
        }
        
        textarea::-webkit-scrollbar{
            display: none;
        }

        #in{
            grid-area: in;
            border-width: 0 0 2px 0;
        }

        #fn{
            grid-area: fn;
        }

        #out{
            grid-area: out;
            border-width: 0 0 0 2px;
        }

    </style>
</html>